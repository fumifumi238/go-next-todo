FROM golang:1.25-alpine

WORKDIR /app

# 依存関係をダウンロード
COPY go.mod go.sum ./
RUN go mod download

# airをインストール
RUN go install github.com/cosmtrek/air@v1.52.0

# ソースコードをコピー (volumesでマウントされるが、イメージ作成のためにも必要)
COPY . .

# 開発サーバーの実行は docker-compose.dev.yml の command で上書きされます
CMD ["sh"]
